!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e||self).ImagePreloader=n()}(this,function(){var e=function(){function e(e,n){this.onProgress=void 0,this.fallbackImage=void 0,this.onProgress="function"==typeof n?n:null,this.fallbackImage="string"==typeof e||e instanceof HTMLImageElement?e:null}return e.prototype.preload=function(n){var t=this,r=n.map(function(n){return e.simplePreload(n).catch(function(n){return t.fallbackImage?e.simplePreload(t.fallbackImage).then(function(e){return n.setAttribute("data-fail-src",n.src),n.src=e.src,n},function(){return Promise.reject(n)}):Promise.reject(n)}).then(function(e){return t.onProgress&&t.onProgress({status:!0,value:e}),e},function(e){return t.onProgress&&t.onProgress({status:!1,value:e}),Promise.reject(e)})});return Promise.allSettled(r).then(function(e){return e.map(function(e){return"rejected"===e.status?{status:!1,value:e.reason}:{status:!0,value:e.value}})})},e}();return e.simplePreload=function(e){return new Promise(function(n,t){var r;e instanceof HTMLImageElement?(r=e).complete?r.naturalHeight?n(r):t(r):(r.onload=function(){return n(r)},r.onerror=r.onabort=function(){return t(r)}):((r=new Image).onload=function(){return n(r)},r.onerror=r.onabort=function(){return t(r)},r.src=e)})},e});
//# sourceMappingURL=image-preloader.min.js.map
